(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2088a931","chunk-53b08722","chunk-564499ad"],{"11fe":function(e,t,a){"use strict";a("bd66")},3134:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pages"},[a("el-pagination",{attrs:{background:"","current-page":Number(e.paginationPage),total:Number(e.total),"page-size":Number(e.paginationPagesize),"page-sizes":[10,20,30,50],layout:"prev, pager, next, sizes, jumper"},on:{"size-change":e.onPageSizeChange,"current-change":e.onPageChange}})],1)},s=[],r={name:"PageTool",props:["total","paginationPage","paginationPagesize"],data:function(){return{}},methods:{onPageChange:function(e){this.$emit("pageChange",e)},onPageSizeChange:function(e){this.$emit("pageSizeChange",e)}}},n=r,l=(a("11fe"),a("2877")),o=Object(l["a"])(n,i,s,!1,null,null,null);t["default"]=o.exports},"3ea4":function(e,t,a){},"6c97":function(e,t,a){},"7b35":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"articles-container"},[a("el-card",{staticClass:"box-card"},[a("el-row",[a("el-form",{ref:"requestParameters",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.requestParameters,size:"small"}},[a("el-form-item",{staticClass:"abc",attrs:{label:"关键字"}},[a("el-input",{attrs:{placeholder:"根据文章标题搜索"},model:{value:e.requestParameters.keyword,callback:function(t){e.$set(e.requestParameters,"keyword",t)},expression:"requestParameters.keyword"}})],1),a("el-form-item",{staticClass:"abb",attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.requestParameters.state,callback:function(t){e.$set(e.requestParameters,"state",t)},expression:"requestParameters.state"}},[a("el-option",{attrs:{label:"启用",value:1}}),a("el-option",{attrs:{label:"禁用",value:"禁用"}})],1)],1),a("el-form-item",[a("el-button",{on:{click:e.clearHandleFilter}},[e._v("清除")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")])],1),a("el-button",{staticClass:"filter-item fr",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.handleCreate}},[a("i",{staticClass:"el-icon-edit"}),a("span",{staticClass:"jiqiao"},[e._v("新增技巧")])])],1),""!==e.alertText?a("el-alert",{staticClass:"alert",attrs:{title:e.alertText,type:"info",closable:!1,"show-icon":""}}):e._e()],1),a("el-table",{key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.dataList,fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"id",type:"index",label:"序号",width:"80",align:"left","header-align":"left"}}),a("el-table-column",{attrs:{prop:"name",label:"文章标题",width:"400",align:"left","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title)+" "),t.row.videoURL?a("a",{staticClass:"el-icon-film",attrs:{href:"#"},on:{click:function(a){e.isPlay=!0,e.videoURL=t.row.videoURL}}}):e._e()])]}}])}),a("el-table-column",{attrs:{prop:"visits",label:"阅读数",align:"left","header-align":"left","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.visits))])]}}])}),a("el-table-column",{attrs:{prop:"username",label:"录入人","min-width":"80",align:"left","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.username))])]}}])}),a("el-table-column",{attrs:{prop:"date",label:"录入时间",align:"left","header-align":"left","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTimeByString")(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{prop:"state",label:e.$t("table.state"),align:"left","header-align":"left",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.state?"已启用":"已禁用"))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"left","header-align":"left",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.open(t.row.id)}}},[e._v("预览")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.btnchangeState(t.row)}}},[e._v(" "+e._s(t.row.state?"禁用":"启用")+" ")]),a("el-button",{attrs:{type:"text",disabled:Boolean(t.row.state)},on:{click:function(a){return e.handleUpdate(t.row.id)}}},[e._v("修改")]),a("el-button",{attrs:{type:"text",disabled:Boolean(t.row.state)},on:{click:function(a){return e.removeUser(t.row.id)}}},[e._v("删除")])]}}])})],1),Math.ceil(e.total/e.requestParameters.pagesize)>1?a("div",{staticClass:"pagination"},[a("PageTool",{attrs:{paginationPage:e.requestParameters.page,paginationPagesize:e.requestParameters.pagesize,total:e.total},on:{pageChange:e.handleCurrentChange,pageSizeChange:e.handleSizeChange}})],1):e._e(),a(e.cpt,{ref:"editArticles",tag:"component",attrs:{formData:e.requestParameters,text:e.text,pageTitle:e.pageTitle,formBase:e.formData,ruleInline:e.ruleInline},on:{"update:formData":function(t){e.requestParameters=t},"update:form-data":function(t){e.requestParameters=t},newDataes:e.handleLoadDataList,handleCloseModal:e.handleCloseModal}}),a("el-dialog",{attrs:{title:"预览文章",visible:e.dialogVisible,width:"800px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dataForm",staticClass:"demo-dataForm",attrs:{model:e.articlesList,"label-width":"100px"}},[a("h2",[e._v(e._s(e.articlesList.title))]),a("div",{staticClass:"articleHead"},[a("span",[e._v(e._s(e._f("parseTimeByString")(e.articlesList.createTime)))]),a("span",[e._v(e._s(e.username))]),a("span",{staticClass:"el-icon-view"}),a("span",[e._v(e._s(e.articlesList.visits))])]),a("div",{staticClass:"content",domProps:{innerHTML:e._s(e.articlesList.articleBody)}})])],1),e.isPlay?a("div",{staticClass:"popup"},[a("div",{staticClass:"videoWrap"},[a("video",{staticClass:"video",attrs:{autoplay:"",src:e.videoURL}})]),a("div",{staticClass:"close",on:{click:function(t){e.isPlay=!1}}},[a("i",{staticClass:"el-icon-close"})])]):e._e()],1)],1)},s=[],r=a("1da1"),n=(a("a434"),a("96cf"),a("b3af")),l=a("3134"),o=a("c524"),c=a("4f75"),u={components:{PageTool:l["default"],ArticlesAdd:o["default"]},props:{},data:function(){return{videoURL:"",cpt:"ArticlesAdd",articlesList:{},isPlay:!1,username:"",dialogVisible:!1,alertText:"",total:null,tableKey:0,deletedDate:!1,showDate:!0,dialogStatus:"",pageTitle:"文章",text:"",dataList:[],requestParameters:{page:1,pagesize:10,keyword:"",state:null},formData:{title:"",articleBody:"",videoURL:""},ruleInline:{title:[{required:!0,message:"请输入文章标签",trigger:"blur"}],articleBody:[{required:!0,message:"请输入文章内容",trigger:"blur"}]}}},computed:{},watch:{},created:function(){this.getList();var e=this;document.onkeydown=function(t){var a=window.event.keyCode;13===a&&e.handleFilter(this.requestParameters)}},mounted:function(){},methods:{btnchangeState:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.state?0:1,a.prev=1,a.next=4,Object(n["b"])({id:e.id,state:i});case 4:e.state=i,t.$message({message:"操作成功",type:"success"}),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})))()},open:function(e){var t=this;this.formData.id=e,this.dialogVisible=!0,Object(n["c"])({id:e}).then((function(e,a){t.articlesList=e.data,Object(c["b"])({id:e.data.creatorID}).then((function(e){t.username=e.data.username}))}))},getList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["d"])(e.requestParameters);case 2:a=t.sent,i=a.data,console.log(i),e.dataList=i.items,e.total=i.counts,e.alertText="数据一共 ".concat(e.total," 条");case 8:case"end":return t.stop()}}),t)})))()},handleFilter:function(){this.requestParameters.page=1,console.log(this.requestParameters.state),"启用"===this.requestParameters.state&&(this.requestParameters.state=1),this.getList(this.requestParameters)},clearHandleFilter:function(){0===this.requestParameters.keyword.length&&0===this.requestParameters.state.length||(this.requestParameters.keyword="",this.requestParameters.state=null)},handleSizeChange:function(e){this.requestParameters.pagesize=e,1===this.requestParameters.page&&this.getList(this.requestParameters)},handleCurrentChange:function(e){this.requestParameters.page=e,this.getList()},rowClassStatus:function(e){return 1===e.row.is_deleted?(this.deletedDate=!0,this.showDate=!1,"disabled"):""},handleLoadDataList:function(){this.getList()},query:function(){this.formData={title:"",articleBody:"",videoURL:""}},handleCreate:function(){this.query(),this.text="新增",this.$refs.editArticles.dialogFormV()},handleCloseModal:function(){this.$refs.editArticles.dialogFormH()},hanldeEditForm:function(e){var t=this;this.formData.id=e,Object(n["c"])({id:e}).then((function(e,a){console.log(e);var i=e.data;if(a)return a;t.formData.id=i.id,t.formData.title=i.title,t.formData.articleBody=i.articleBody,t.formData.videoURL=i.videoURL}))},handleUpdate:function(e){this.query();var t=this;this.text="修改",this.$refs.editArticles.dialogFormV(),t.hanldeEditForm(e)},removeUser:function(e){var t=this;this.$confirm("此操作将永久删除学科 , 是否继续?","提示",{type:"warning"}).then((function(){Object(n["e"])({id:e}).then((function(a){t.$message.success("成功删除了学科!"),t.dataList.splice(e,1),t.getList(t.requestParameters)})).catch((function(e){t.$message.error("删除失败!")}))})).catch((function(){t.$message.info("已取消操作!")}))}}},d=u,f=(a("ffa0"),a("2877")),m=Object(f["a"])(d,i,s,!1,null,"2c3b64c2",null);t["default"]=m.exports},b3af:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return n})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return c}));a("99af");var i=a("b775"),s=function(e){return Object(i["a"])("/articles","get",e)},r=function(e){return Object(i["a"])("/articles/".concat(e.id),"get",e)},n=function(e){return Object(i["a"])("/articles","post",e)},l=function(e){return Object(i["a"])("/articles/".concat(e.id),"put",e)},o=function(e){return Object(i["a"])("/articles/".concat(e.id),"delete",e)},c=function(e){return Object(i["a"])("/articles/".concat(e.id,"/").concat(e.state),"post",e)}},bd66:function(e,t,a){},c524:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-dialog",{attrs:{title:e.text+e.pageTitle,visible:e.dialogFormVisible,width:"800px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",staticClass:"demo-dataForm",attrs:{model:e.formBase,rules:e.ruleInline,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"文章标题:",prop:"title",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入文章标签"},model:{value:e.formBase.title,callback:function(t){e.$set(e.formBase,"title",t)},expression:"formBase.title"}})],1),a("el-form-item",{attrs:{label:"文章内容:",prop:"articleBody"}},[a("quill-editor",{staticClass:"quill-editor",attrs:{options:e.editorOption},model:{value:e.formBase.articleBody,callback:function(t){e.$set(e.formBase,"articleBody",t)},expression:"formBase.articleBody"}})],1),a("el-form-item",{attrs:{label:"视频地址",prop:"videoURL",size:"small"}},[a("el-input",{attrs:{placeholder:"请输入视频地址"},model:{value:e.formBase.videoURL,callback:function(t){e.$set(e.formBase,"videoURL",t)},expression:"formBase.videoURL"}})],1),a("el-form-item",[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.createData}},[e._v("确认")])],1)],1)],1)],1)},s=[],r=a("5530"),n=a("b3af"),l=(a("a753"),a("8096"),a("14e1"),a("953d")),o={components:{quillEditor:l["quillEditor"]},props:["text","pageTitle","formBase","ruleInline"],data:function(){return{dialogFormVisible:!1,editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["blockquote"],["code-block","image","link"]]},placeholder:""}}},methods:{dialogFormV:function(){this.dialogFormVisible=!0},dialogFormH:function(){this.dialogFormVisible=!1},handleClose:function(){this.$emit("handleCloseModal")},createData:function(){var e=this;this.$refs.dataForm.validate((function(t){if(t){e.$emit("handleCloseModal");var a=Object(r["a"])({},e.formBase);e.formBase.id?Object(n["f"])(a).then((function(){e.$message({message:"操作成功",type:"success"}),e.$emit("newDataes",e.formBase)})):Object(n["a"])(e.formBase).then((function(){e.$message({message:"操作成功",type:"success"}),e.$emit("newDataes",e.formBase)}))}else e.$Message.error("*号为必填项!")}))}}},c=o,u=(a("cb31"),a("2877")),d=Object(u["a"])(c,i,s,!1,null,"7fb73350",null);t["default"]=d.exports},cb31:function(e,t,a){"use strict";a("6c97")},ffa0:function(e,t,a){"use strict";a("3ea4")}}]);
//# sourceMappingURL=chunk-2088a931.5745f9c1.js.map